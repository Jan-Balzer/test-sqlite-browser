
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SQLite in Browser</title>
  <script src="https://sql.js.org/dist/sql-wasm.js"></script>
</head>
<body>
  <h1>SQLite in the Browser</h1>
  <pre id="output">Loading...</pre>

  <script type="module">
    import initSqlJs from "https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/sql-wasm.js";

    async function main() {
      const SQL = await initSqlJs({
        locateFile: file => `https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/${file}`
      });

      const db = new SQL.Database();

      db.run(`
        CREATE TABLE users (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          name TEXT,
          email TEXT
        );
      `);

      db.run("INSERT INTO users (name, email) VALUES (?, ?)", ["Alice", "alice@example.com"]);
      db.run("INSERT INTO users (name, email) VALUES (?, ?)", ["Bob", "bob@example.com"]);

      const stmt = db.prepare("SELECT * FROM users");
      const results = [];

      while (stmt.step()) {
        results.push(stmt.getAsObject());
      }

      document.getElementById("output").textContent = JSON.stringify(results, null, 2);
    }

    main();
  </script>
</body>
</html>
